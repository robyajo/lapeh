# Project Structure

Understanding the folder structure is the first step to mastering Lapeh Framework. This project is designed to be **easy to navigate**, separating your application logic (*User Space*) from the framework engine (*Core Framework*).

## Directory Map

Here is the big picture of the Lapeh project directory structure:

```
lapeh/
‚îú‚îÄ‚îÄ bin/                 # CLI entry point (npx lapeh)
‚îú‚îÄ‚îÄ lib/                 # ‚öôÔ∏è Framework Core (Lapeh Engine)
‚îú‚îÄ‚îÄ scripts/             # Automation scripts (Build, Release, Generators)
‚îú‚îÄ‚îÄ src/                 # üè† Your Application Source Code (Where you work)
‚îÇ   ‚îú‚îÄ‚îÄ config/          # Application configuration
‚îÇ   ‚îú‚îÄ‚îÄ modules/         # Business logic per feature (Controllers)
‚îÇ   ‚îî‚îÄ‚îÄ routes/          # API route definitions
‚îú‚îÄ‚îÄ storage/             # Temporary files, logs, and uploads
‚îú‚îÄ‚îÄ tests/               # Unit & Integration Tests
‚îú‚îÄ‚îÄ website/             # Documentation source code
‚îú‚îÄ‚îÄ .env                 # Environment variables (Secrets!)
‚îú‚îÄ‚îÄ ecosystem.config.js  # PM2 Configuration
‚îú‚îÄ‚îÄ jest.config.js       # Testing Configuration
‚îú‚îÄ‚îÄ package.json         # Project dependencies
‚îî‚îÄ‚îÄ tsconfig.json        # TypeScript Configuration
```

---

## üè† `src/` Folder (User Space)

This is the most important folder. 99% of your coding time will be spent here.

### `src/modules/` (Modular Architecture)
Lapeh uses a **Modular** approach. Each feature is grouped into a single folder to keep code organized as the application grows.

*   **Example**: If you build a "Product" feature, you will have a `src/modules/Product/` folder.
*   **Contents**: Usually contains the `controller` (logic) and supporting files for that feature.

### `src/routes/`
Where you define your API URLs.

*   **`index.ts`**: The main gateway for all routes.
*   **Other route files**: Connect URLs (e.g., `/api/users`) to functions in Controllers and attach middleware.

### `src/config/`
Static application configuration.

*   **`app.ts`**: General settings.
*   **`cors.ts`**: Domain access security settings (CORS).

---

## ‚öôÔ∏è `lib/` Folder (Framework Core)

This folder is the "engine" behind the scenes. It contains the core code that runs the server, database connections, and built-in utilities.

> **Note**: You rarely need to touch this folder unless you want to modify the framework's basic behavior.

*   **`lib/core/`**: Express server setup, Redis connection, and Serializer.
*   **`lib/middleware/`**: Built-in middleware like `auth` (JWT), `rateLimit`, and `requestLogger`.
*   **`lib/utils/`**: Helper functions like `validator` (input validation), `logger` (logging), and `response` (standard response format).

---

## üß™ `tests/` Folder

Where you write automated tests to ensure your application runs smoothly.

*   **`unit/`**: Tests for small functions in isolation.
*   **`integration/`**: Tests for complete API flows (e.g., hit login endpoint and verify token receipt).
*   **`setup.ts`**: Initial configuration before tests run.

---

## üì¶ `storage/` Folder

Folder for storing files generated by the application at runtime.

*   **`logs/`**: Application log files (error log, access log).
*   **`uploads/`** (Optional): Storage for user-uploaded files (if using local storage).

---

## üõ†Ô∏è Important Configuration Files

| File | Description |
| :--- | :--- |
| **`.env`** | Stores application **secrets** (Database URL, API Keys). **Do not commit this file to Git!** |
| **`package.json`** | List of libraries used and script commands (`npm run ...`). |
| **`ecosystem.config.js`** | Configuration for **PM2**. Used when deploying to production servers (VPS) for auto-restart. |
| **`jest.config.js`** | Settings for the testing framework (Jest). |
| **`nodemon.json`** | Server auto-restart settings while you are coding (Development mode). |

---

## ü§ñ `scripts/` Folder

Contains "magic" scripts that make your life easier. These scripts are usually called via `npm run`.

*   **`release.js`**: Automates version release, changelog, and blog.
*   **`make-module.js`**: Generator to quickly create new modules/controllers.
*   **`sync-docs.js`**: Synchronizes documentation across languages.
